<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Dashboard</title>
	<link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="{{ url_for('static', filename='js/script.js') }}"></script>
	<style>
		body {
			font-family: Arial, sans-serif;
			background-color: #f4f4f9;
			color: #333;
		}
		.navbar {
			display: flex;
			justify-content: space-between;
			align-items: center;
			background-color: #333;
			padding: 10px;
		}
		.navbar a {
			color: white;
			text-decoration: none;
			padding: 10px;
		}
		.navbar a:hover {
			background-color: #575757;
		}
		.container {
			display: flex;
			flex-wrap: wrap;
			justify-content: space-between;
			padding: 20px;
		}
		.info {
			background-color: white;
			border-radius: 5px;
			padding: 20px;
			margin: 10px;
			box-shadow: 0 0 10px rgba(0,0,0,0.1);
			flex: 1;
			min-width: 45%;
		}
		table {
			width: 100%;
			border-collapse: collapse;
		}
		table, th, td {
			border: 1px solid #ddd;
		}
		th, td {
			padding: 10px;
			text-align: left;
		}
		th {
			background-color: #f2f2f2;
		}
		button {
			background-color: #333;
			color: white;
			border: none;
			padding: 10px 20px;
			margin: 10px 0;
			cursor: pointer;
			border-radius: 5px;
		}
		button:hover {
			background-color: #575757;
		}
		.server-status {
			margin-top: 20px;
			font-size: 1.2em;
		}
	</style>
</head>
<body>
	<div class="navbar">
		<div>
			<a href="/">Dashboard</a>
			<a href="/logs">Logs</a>
			<a href="/files">Files</a>
			<a href="/mc_server_console">MC Server Console</a>
		</div>
		<div>
			<span class="server-status">Server Status: {% if server_status %} ON {% else %} OFF {% endif %}</span>
		</div>
	</div>

	<h1>System Information</h1>

	{% if server_status %}
	<div class="container" id="info">
		<div class="info">
			{% set uname_info = command_results['uname -a'].split() %}
			<p>Hostname: {{ uname_info[1] }}</p>
			<p>Linux Version: {{ uname_info[2] }}</p>
			<h2>Uptime</h2>
			<pre>{{ command_results['uptime'] }}</pre>
			<h2>Disk Space</h2>
			<pre>{{ command_results['df -h'] }}</pre>
		</div>
		<div class="info">
			<h2>Memory Usage</h2>
			{% set memory_info = command_results['free -m'].split('\n') %}
			<table>
				<tr>
					<th>Category</th>
					<th>Usage (MB)</th>
				</tr>
				<tr>
					<td>Total Memory</td>
					<td>{{ memory_info[1].split()[1] }}</td>
				</tr>
				<tr>
					<td>Used Memory</td>
					<td>{{ memory_info[1].split()[2] }}</td>
				</tr>
				<tr>
					<td>Free Memory</td>
					<td>{{ memory_info[1].split()[3] }}</td>
				</tr>
				<tr>
					<td>Shared Memory</td>
					<td>{{ memory_info[1].split()[4] }}</td>
				</tr>
				<tr>
					<td>Buffer/Cache</td>
					<td>{{ memory_info[1].split()[5] }}</td>
				</tr>
				<tr>
					<td>Available Memory</td>
					<td>{{ memory_info[1].split()[6] }}</td>
				</tr>
				<tr>
					<td>Total Swap</td>
					<td>{{ memory_info[2].split()[1] }}</td>
				</tr>
				<tr>
					<td>Used Swap</td>
					<td>{{ memory_info[2].split()[2] }}</td>
				</tr>
				<tr>
					<td>Free Swap</td>
					<td>{{ memory_info[2].split()[3] }}</td>
				</tr>
			</table>
		</div>
	</div>
	{% else %}
	<p>Server is not running. System information is not available.</p>
	{% endif %}

	<h2>Server Controls</h2>
	<form action="/start_server" method="post">
		<button type="submit" name="action" value="start">Start Server</button>
	</form>
	<form action="/stop_server" method="post">
		<button type="submit" name="action" value="stop">Stop Server</button>
	</form>
	<form action="/restart_server" method="post">
		<button type="submit" name="action" value="restart">Restart Server</button>
	</form>
</body>
</html>
